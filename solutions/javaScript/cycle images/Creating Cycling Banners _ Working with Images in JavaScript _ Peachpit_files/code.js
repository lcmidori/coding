!function e(t,n,r){function s(i,u){if(!n[i]){if(!t[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var a=n[i]={exports:{}};t[i][0].call(a.exports,function(e){var n=t[i][1][e];return s(n?n:e)},a,a.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(require,module,exports){!function(){var Promise=require("../lib/Promise");eval("1"),!function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){var t=e;return void 0!==t._yieldify&&t._yieldify.tagPresent===!0}function o(e){var t=e;void 0===t._yieldify&&(t._yieldify={messages:[]}),t._yieldify.tagPresent=!0}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../lib/Logger"),u=e("../../sandbox/modules/BaseModule"),a="api";n.isTagAlreadyPresent=r,n.markTagPresent=o;var c=function(e){function t(t,n){var r=e.call(this)||this;return r.window=t,r.validators=n,r}return i(t,e),t.prototype.start=function(){var e=this;s.logger.debug(null,"Setting up API");var t={push:function(t){return e.newMessageReceived(t)}};if(this.window._yieldify)if(this.window._yieldify&&this.window._yieldify.messages instanceof Array){var n=this.window._yieldify.messages;this.window._yieldify.messages=t,n instanceof Array&&n.forEach(function(t){return e.newMessageReceived(t)})}else s.logger.error(null,"Error setting up API. Unexpected global state prior to API message bus setup");else this.window._yieldify={messages:t}},t.prototype["interface"]=function(){var e=this;return{sendToSandbox:function(t){return e.sendToSandbox(t)}}},t.prototype.getRoutingLabel=function(){return a},t.prototype.newMessageReceived=function(e){s.logger.debug({message:e},"Received API Message"),this.validateMessage(e)?(s.logger.debug(null,"Message valid, passing to sandbox"),this.sendToSandbox(e).then(function(t){e.callback&&e.callback(null,t)})["catch"](function(t){e.callback&&e.callback(t)})):s.logger.error(null,"API Message didn't pass any validators")},t.prototype.validateMessage=function(e){for(var t=0,n=this.validators;t<n.length;t++){var r=n[t];if(r(e))return!0}return!1},t.prototype.sendToSandbox=function(e){return this.invokeMethod("sendToSandbox",e)},t}(u.BaseModule);n.APIHost=c},{"../../lib/Logger":14,"../../sandbox/modules/BaseModule":25}],2:[function(e,t,n){"use strict";function r(e){return"object"==typeof e&&"PING"===e.type&&"string"==typeof e.message}function o(e,t){return v.logger.debug({pingMessage:e.message},"API PING!"),Promise.resolve()}function i(e){return"object"==typeof e&&"EXTERNAL_VALUE_UPDATED"===e.type&&"string"==typeof e.name&&"string"==typeof e.pageType&&("string"==typeof e.value||"number"==typeof e.value||null===e.value)}function s(e,t){var n=d.externalValue(e.name,e.pageType)(t.getState());return void 0===n?Promise.reject(new Error("Invalid external value update")):a(e.pageType,t)?u(n.dataType,e)?(t.dispatch(h.pageElementValueUpdated(n.id,e.value)),Promise.resolve()):Promise.reject(new Error("External value type invalid")):Promise.reject(new y("Updating external value for inactive page type"))}function u(e,t){return null===t.value||("String"===e&&"string"!=typeof t.value?(v.logger.error({externalValueUpdate:t},"Invalid external value, expected a String"),!1):"Integer"!==e||"number"==typeof t.value&&t.value%1===0?"Float"!==e||"number"==typeof t.value||(v.logger.error({externalValueUpdate:t},"Invalid external value, expected a Float"),!1):(v.logger.error({externalValueUpdate:t},"Invalid external value, expected an Integer"),!1))}function a(e,t){return p.some(d.activePageTypes(t.getState()),function(t){return t.name===e})}function c(e){return"object"==typeof e&&"GET_VERSIONS"===e.type}function l(e,t){return Promise.resolve(t)}var f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var p=e("@yieldify/gendry-dragonglass"),d=e("../redux/reducers/page-scraping"),h=e("../redux/actions/page-elements"),v=e("../../lib/Logger");n.WARNING_NAME="Warning";var y=function(e){function t(t){var r=e.call(this,t)||this;return r.name=n.WARNING_NAME,r}return f(t,e),t}(Error);n.Warning=y,n.messageValidators=[r,i,c],n.validatePingMessage=r,n.handlePingMessage=o,n.validateExternalValueUpdatedMessage=i,n.handleExternalValueUpdate=s,n.validateGetVersionsMessage=c,n.handleGetVersionsMessage=l},{"../../lib/Logger":14,"../redux/actions/page-elements":7,"../redux/reducers/page-scraping":8,"@yieldify/gendry-dragonglass":71}],3:[function(e,t,n){"use strict";function r(){if(h.isTagAlreadyPresent(window))return void i.logger.error(null,"Multiple YCP tags present. Blocking secondary tag setup");h.markTagPresent(window),i.logger.debug(null,"Starting sandbox setup."),i.logger.debug({builder:S,tag:P},"Versions:");var e=new b.EventConverter(b.SERIALISATION_DESCS),t=new y.DOMUtil(document),n=new g.WindowUtil(window),r=new s.CrossOriginServer(window),m=new f.JSONSandbox(document),L=new u.IFrameCreator(r,document,t),I=new l.DOMHost(t,e),x=new p.WindowHost(n,e),T=new d.CookieHost,j=new h.APIHost(window,_.messageValidators),A=new v.LocalStorageHost(localStorage),k=new c.IFrameHost(L),R=new E.AnalyticsHost(window),N={websiteConfig:w,cookies:document.cookie,localStorage:localStorage.getItem(O),location:n.getLocation(),referrer:document.referrer,versionInfo:{tag:P,builder:S},windowDimensions:n.getInnerDimensions()},U={initConfig:m.stringify(N),provide:[I,x,T,A,k,j,R]},D={src:o.addHashParameters(M,o.getHash(window)),parentElement:"body",name:C};L.create(D).then(a.RemoteWindow.connect(m,U)).then(function(e){i.logger.debug({sandbox:e},"Sandbox Initialised"),j.start()})}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../lib/utils"),i=e("../lib/Logger"),s=e("../sandbox/remote-windows/CrossOriginServer"),u=e("../sandbox/remote-windows/IFrameCreator"),a=e("../sandbox/remote-windows/RemoteWindow"),c=e("../sandbox/modules/iframe/Host"),l=e("../sandbox/modules/dom/Host"),f=e("../lib/JSONSandbox"),p=e("../sandbox/modules/window/Host"),d=e("../sandbox/modules/cookie/Host"),h=e("./api/Host"),v=e("../sandbox/modules/local-storage/Host"),y=e("../lib/browser/DOMUtil"),g=e("../lib/browser/WindowUtil"),b=e("../lib/events/EventConverter"),m=e("@yieldify/gendry-browser-compat"),_=e("./api/messages"),E=e("./integrations/analytics/Host"),w="{\"campaigns\":[],\"cookieDomain\":null,\"featureFlags\":[],\"gaIntegration\":false,\"gatewayEndpoint\":\"https://gateway.yieldify-production.com\",\"organisationId\":189,\"scraping\":{\"pageTypes\":[{\"name\":\"common\",\"urlPattern\":\".*\",\"pageElements\":[{\"id\":758,\"name\":\"mini-basket-value\",\"type\":\"PageElementValue\",\"selector\":\"\",\"dataType\":\"Float\",\"attr\":null,\"regex\":\"\"}]},{\"name\":\"basket\",\"urlPattern\":\"\",\"pageElements\":[{\"id\":757,\"name\":\"total\",\"type\":\"PageElementValue\",\"selector\":\"\",\"dataType\":\"Float\",\"attr\":null,\"regex\":\"\"}]},{\"name\":\"last-price\",\"urlPattern\":\"\",\"pageElements\":[{\"id\":759,\"name\":\"total\",\"type\":\"PageElementValue\",\"selector\":\"\",\"dataType\":\"Float\",\"attr\":null,\"regex\":\"\"}]},{\"name\":\"thankyou\",\"urlPattern\":\"\",\"pageElements\":[{\"id\":760,\"name\":\"order-id\",\"type\":\"PageElementValue\",\"selector\":\"\",\"dataType\":\"String\",\"attr\":null,\"regex\":null}]}],\"domainEntities\":[{\"name\":\"basket\",\"properties\":[{\"name\":\"value\",\"dataType\":\"Float\",\"aggregation\":\"priority\",\"valueSources\":[{\"pageElementId\":758,\"type\":\"passthrough\"},{\"pageElementId\":757,\"type\":\"passthrough\"}]}]},{\"name\":\"transaction\",\"properties\":[{\"name\":\"total\",\"dataType\":\"Float\",\"aggregation\":\"priority\",\"valueSources\":[{\"pageElementId\":759,\"type\":\"passthrough\"}]},{\"name\":\"order-id\",\"dataType\":\"String\",\"aggregation\":\"priority\",\"valueSources\":[{\"pageElementId\":760,\"type\":\"passthrough\"}]}]}]},\"trackerEndpoint\":\"v2.dc.yieldify.com\",\"websiteCurrency\":\"USD\",\"websiteId\":190}",O="_yi",M="https://td.yieldify.com/0.0.1/tag/1.75.0/main.html",S="1.75.0",P="1.75.0",C="yie-sandbox";o.initialiseDebugMode(window),o.isDebugMode()&&(i.logger.setLevel(i.Level.DEBUG),i.logger.enableConsoleLogging());try{document.body?(i.logger.debug(null,"document.body already present, setting up synchronously."),r()):(i.logger.debug(null,"document.body not ready, setting up asynchronously."),m.EventTargetUtil.addEventListener(document,"DOMContentLoaded",function(){i.logger.debug(null,"document.body found, setting up."),r()}))}catch(L){i.logger.error({error:L},"Error in code.js")}},{"../lib/JSONSandbox":13,"../lib/Logger":14,"../lib/browser/DOMUtil":18,"../lib/browser/WindowUtil":19,"../lib/events/EventConverter":20,"../lib/utils":24,"../sandbox/modules/cookie/Host":28,"../sandbox/modules/dom/Host":30,"../sandbox/modules/iframe/Host":32,"../sandbox/modules/local-storage/Host":34,"../sandbox/modules/window/Host":36,"../sandbox/remote-windows/CrossOriginServer":37,"../sandbox/remote-windows/IFrameCreator":39,"../sandbox/remote-windows/RemoteWindow":40,"./api/Host":1,"./api/messages":2,"./integrations/analytics/Host":5,"@yieldify/gendry-browser-compat":48}],4:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../sandbox/modules/BaseModule"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getRoutingLabel=function(){return"analytics"},t.prototype["interface"]=function(){return{forwardEvent:this.forwardEvent}},t}(o.BaseModule);n.AnalyticsBase=i},{"../../../sandbox/modules/BaseModule":25}],5:[function(e,t,n){"use strict";function r(e){var t=e;return"undefined"!=typeof t._gaq&&"function"==typeof t._gaq.push}function o(e){var t=e,n=t[t.GoogleAnalyticsObject]||t.ga;return"function"==typeof n}function i(e){return o(e)?(a.logger.debug(null,"Universal Analytics found"),n.pushToUA):r(e)?(a.logger.debug(null,"Google Analytics found"),n.pushToGA):(a.logger.debug(null,"No analytics found"),n.reportError)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("./Base"),a=e("../../../lib/Logger");n.pushToGA=function(e,t,n,r){var o=!r;e._gaq.push(["_trackEvent","Yieldify",t,n,void 0,o])},n.pushToUA=function(e,t,n,r){var o=e[e.GoogleAnalyticsObject]||e.ga,i={nonInteraction:!r};o.getAll().map(function(e){return e.get("name")}).forEach(function(e){o(e+".send","event","Yieldify",t,n,void 0,i)})},n.reportError=function(e,t,n,r){throw new Error("GAHost has received a message but no analytics has been found")},n.getAnalyticsImplementation=i;var c=function(e){function t(t,n){var r=e.call(this)||this;return r.window=t,r.pushFn=n||i(t),r}return s(t,e),t.prototype.forwardEvent=function(e,t,n){a.logger.debug({eventStr:e,eventType:t},"Forwarding event to the analytics object");try{this.pushFn(this.window,e,t,n)}catch(r){return Promise.reject(r)}return Promise.resolve()},t}(u.AnalyticsBase);n.AnalyticsHost=c},{"../../../lib/Logger":14,"./Base":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../lib/CachingObservable");n.SCRAPING_INTERVAL_MS=500;var o=function(){function e(e,t,n,r){if(this.domUtil=e,this.asyncWorker=t,this.selector=n,this.attr=r,!this.domUtil.validateSelector(this.selector))throw new Error("Invalid selector: "+this.selector)}return e.prototype.start=function(){var e=this;this.valuesObservable=new r.CachingObservable,this.setTimeoutId=this.asyncWorker.performAsyncCallback(function(){e.valuesObservable.publishIfChanged(e.domUtil.scrape(e.selector,e.attr))},n.SCRAPING_INTERVAL_MS,n.SCRAPING_INTERVAL_MS)},e.prototype.stop=function(){"number"==typeof this.setTimeoutId&&this.asyncWorker.stopCallback(this.setTimeoutId)},e.prototype.getValuesObservable=function(){return this.valuesObservable},e}();n.ValueScraper=o},{"../../../../lib/CachingObservable":11}],7:[function(e,t,n){"use strict";function r(e,t){return{type:"PAGE_ELEMENT_VALUE_UPDATED",id:e,value:t}}function o(e){return{type:"PAGE_SCRAPING_SYNC",scraping:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.pageElementValueUpdated=r,n.pageScrapingSync=o},{}],8:[function(e,t,n){"use strict";function r(e,t){return{pageTypes:o(e,t),pageElements:s(e)}}function o(e,t){return e.scraping?h.dict(e.scraping.pageTypes.map(function(e){return{key:e.name,value:i(e.name,e.urlPattern,t,e.pageElements.map(function(e){return e.id}))}})):{}}function i(e,t,n,r){return{name:e,urlPattern:t,active:p(n,t),elementIds:r}}function s(e){var t=e.scraping.pageTypes.map(function(e){return e.pageElements.map(function(t){return{key:t.id.toString(),value:{id:t.id,name:t.name,pageTypeName:e.name,type:t.type,dataType:t.dataType,value:n.PAGE_ELEMENT_VALUE_UNKNOWN}}})});return h.dict(h.flatten(t))}function u(e,t){switch(t.type){case"PAGE_URL_UPDATED":var n=l(e,t);return f(n,e,t);case"PAGE_SCRAPING_SYNC":return v.update(e).set(function(){return t.scraping});case"PAGE_ELEMENT_VALUE_UPDATED":return v.update(e).get("pageElements").get(t.id.toString()).set(function(e){return e?d({},e,{value:c(e.value,t.value)}):e});default:return e}}function a(e){return"string"==typeof e||"number"==typeof e}function c(e,t){var r;return r=a(t)?{type:"known",value:t,disappeared:!1}:null===t?n.PAGE_ELEMENT_VALUE_NONE_MISSING:n.PAGE_ELEMENT_VALUE_UNKNOWN,y.DeepEqual.deepEqual(e,r)?e:null===t&&"known"===e.type?d({},e,{disappeared:!0}):r}function l(e,t){return v.update(e).get("pageTypes").set(h._dictMapValues(function(e){return v.update(e).get("active").set(function(){return p(t.url,e.urlPattern)})}))}function f(e,t,r){return v.update(e).get("pageElements").set(h._dictMapValues(function(r){if("ExternalValue"!==r.type)return r;var o=t.pageTypes[r.pageTypeName].active,i=e.pageTypes[r.pageTypeName].active;return v.update(r).get("value").set(function(e){return o&&i?e:!o&&i?n.PAGE_ELEMENT_VALUE_UNKNOWN:n.PAGE_ELEMENT_VALUE_NONE_INACTIVE})}))}function p(e,t){return null!==t&&0!==t.length&&new RegExp(t).test(e)}var d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var h=e("@yieldify/gendry-dragonglass"),v=e("../../../lib/updater"),y=e("../../../lib/DeepEqual");n.PAGE_ELEMENT_VALUE_UNKNOWN={type:"unknown"},n.PAGE_ELEMENT_VALUE_NONE_MISSING={type:"none",reason:"missing"},n.PAGE_ELEMENT_VALUE_NONE_INACTIVE={type:"none",reason:"inactive"},n.isKnownValue=function(e){return"known"===e.type},n.initialPageScrapingState=r,n.pageScrapingReducer=u,n.updateValue=c,n.pageScraping=function(e){return e.pageScraping},n.pageTypes=function(e){return e.pageScraping.pageTypes},n.activePageTypes=h.selector(n.pageTypes,function(e){return h.values(e).filter(function(e){return e.active})}),n.pageType=function(e){return function(t){return t.pageScraping.pageTypes[e]}},n.pageElements=function(e){return e.pageScraping.pageElements},n.pageElement=function(e){return function(t){return n.pageElements(t)[e]}},n.pageElementValue=function(e){return h.selector(n.pageElements,function(t){var n=t[e.toString()];if(void 0!==n)return n.value})},n.externalValue=function(e,t){return h.selector(n.pageElements,function(n){return h.find(h.values(n),function(n){return t===n.pageTypeName&&e===n.name&&"ExternalValue"===n.type})})}},{"../../../lib/DeepEqual":12,"../../../lib/updater":23,"@yieldify/gendry-dragonglass":71}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./Logger"),o=function(){function e(){this.nextCallbackId=0,this.timeoutKey=0,this.timeoutIdMap={}}return e.prototype.performAsyncCallback=function(e,t,n){var r=this,o=++this.timeoutKey;return this.timeoutIdMap[o]=setTimeout(function(){r.executeCallback(o,e,n,n)},t),o},e.prototype.stopCallback=function(e){try{clearTimeout(this.timeoutIdMap[e])}catch(t){r.logger.error({error:t,timeoutKey:e},"Could not stop the callback.")}},e.prototype.cancelPendingCallbacks=function(){this.cancelBeforeId=this.nextCallbackId},e.prototype.executeCallback=function(e,t,n,o){var i=this,s=this.nextCallbackId++;if(!(this.cancelBeforeId&&s<this.cancelBeforeId))try{t()}catch(u){r.logger.error({error:u},"Async callback failed.")}finally{o&&(this.timeoutIdMap[e]=setTimeout(function(){i.executeCallback(e,t,o,o)},n))}},e}();n.AsyncWorker=o},{"./Logger":14}],10:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Observable"),i=100,s=function(e){function t(t){void 0===t&&(t=i);var n=e.call(this)||this;return n.buffer=[],n.maxBufferSize=t,n}return r(t,e),t.prototype.publish=function(t){if(0===this.subscribers.length){if(this.buffer.length>=this.maxBufferSize)throw new Error("Max buffered values limit reached");this.buffer.push(t)}else e.prototype.publish.call(this,t)},t.prototype.subscribe=function(t){var n=e.prototype.subscribe.call(this,t);return this.buffer.length>0&&this.flush(),n},t.prototype.flush=function(){var t=this.buffer;this.buffer=[];for(var n=0,r=t;n<r.length;n++){var o=r[n];e.prototype.publish.call(this,o)}},t}(o.Observable);n.BufferingObservable=s},{"./Observable":15}],11:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../lib/Observable"),i=e("../lib/DeepEqual"),s=function(e){function t(){return e.call(this)||this}return r(t,e),t.cache=function(e){var n=new t;return e.subscribe(function(e){n.publishIfChanged(e)}),n},t.prototype.publish=function(t){this.value=t,e.prototype.publish.call(this,t)},t.prototype.publishIfChanged=function(e){return!i.DeepEqual.deepEqual(e,this.getCurrentValue())&&(this.publish(e),!0)},t.prototype.getCurrentValue=function(){return this.value},t.prototype.getValue=function(){var e=this;return new Promise(function(t,n){if("undefined"!=typeof e.value)t(e.value);else var r=e.subscribe(function(e){t(e),r.dispose()})})},t.prototype.toJSON=function(){return{value:this.value}},t}(o.Observable);n.CachingObservable=s},{"../lib/DeepEqual":12,"../lib/Observable":15}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.deepEqual=function(t,n){if(null===t||null===n)return t===n;if("undefined"==typeof t||"undefined"==typeof n)return t===n;if(e.isPrimitive(t)||e.isPrimitive(n))return t===n;if(t instanceof Date)return n instanceof Date&&t.getTime()===n.getTime();var r=Object.getOwnPropertyNames(t),o=Object.getOwnPropertyNames(n);if(r.length!==o.length)return!1;r.sort(),o.sort();for(var i=0;i<r.length;i++)if(r[i]!==o[i])return!1;for(var s=0,u=r;s<u.length;s++){var a=u[s];if(!e.deepEqual(t[a],n[a]))return!1}return!0},e.isPrimitive=function(e){return/boolean|number|string/.test(typeof e)},e}();n.DeepEqual=r},{}],13:[function(e,t,n){"use strict";function r(e,t){if("string"==typeof t&&"object"==typeof this[e])try{return JSON.parse(t)}catch(n){return t}return t}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this.json=this.setupJSON(e)}return e.prototype.setupJSON=function(e){var t=e.createElement("iframe");return t.style.display="none",t.name="yie-js",t.src="about:blank",e.body.appendChild(t),t.contentWindow.JSON},e.prototype.parse=function(e,t){return this.json.parse(e,t)},e.prototype.stringify=function(e){return this.json.stringify(e,r)},e}();n.JSONSandbox=o},{}],14:[function(e,t,n){"use strict";function r(e){return u.indexOf(e)}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("./BufferingObservable"),s=e("@yieldify/gendry-dragonglass");n.Level={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",FATAL:"FATAL"};var u=["DEBUG","INFO","WARN","ERROR","FATAL"];n.MAX_REMOTE_LOG=20,n.MAX_LOG_PAYLOAD=1500;var a=function(e){function t(){var t=e.call(this)||this;return t.level=n.Level.INFO,t.consoleLogging=!1,t.messageCount=0,t.isRecursing=!1,t}return o(t,e),t.prototype.debug=function(e,t){this.log(n.Level.DEBUG,t,e)},t.prototype.info=function(e,t){this.log(n.Level.INFO,t,e)},t.prototype.warn=function(e,t){this.log(n.Level.WARN,t,e)},t.prototype.error=function(e,t){this.log(n.Level.ERROR,t,e)},t.prototype.fatal=function(e,t){this.log(n.Level.FATAL,t,e)},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){this.level=e},t.prototype.enableConsoleLogging=function(){this.consoleLogging=!0},t.prototype.publish=function(t){this.messageCount>=n.MAX_REMOTE_LOG||(e.prototype.publish.call(this,t),this.messageCount++,this.messageCount>=n.MAX_REMOTE_LOG&&(this.consoleLog(n.Level.DEBUG,"Remote log cap reached"),e.prototype.publish.call(this,{level:n.Level.WARN,message:JSON.stringify({msg:"Log message cap reached, log truncated"}),timestamp:(new Date).getTime()})))},t.prototype.log=function(e,t,o){if(!(r(e)<r(this.level))){var i=this.normaliseArgs(o);if(this.consoleLog(e,t,i),this.isRecursing)return void this.consoleLog(n.Level.WARN,"Log message triggered while logging. skipping remote log");this.isRecursing=!0,this.remoteLog(e,t,i),this.isRecursing=!1}},t.prototype.remoteLog=function(e,t,r){t=t||"";var o;try{o=JSON.stringify({msg:t,args:r})}catch(i){return void this.consoleLog(n.Level.WARN,"Couldnt serialise remote log message")}o.length>n.MAX_LOG_PAYLOAD&&(o=JSON.stringify({msg:t.substring(0,n.MAX_LOG_PAYLOAD)}),this.consoleLog(n.Level.WARN,"Log message was truncated before sending remotely")),this.publish({level:e,message:o,timestamp:(new Date).getTime()})},t.prototype.consoleLog=function(e,t,r){if(this.consoleLogging)switch(t+=t.match("\n$")?"":"\n",e){default:case n.Level.DEBUG:console.log(t,r);break;case n.Level.INFO:console.info(t,r);break;case n.Level.WARN:console.warn(t,r);break;case n.Level.ERROR:case n.Level.FATAL:console.error(t,r)}},t.prototype.normaliseArgs=function(e){var t=this;if(e)return s.dictMapValues(e,function(e,n){var r;return r=e instanceof Error?t.serialiseError(e):"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent?e.error?t.serialiseError(e.error):t.serialiseErrorEvent(e):e})},t.prototype.serialiseError=function(e){return{name:e.name,message:e.message,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,stack:e.stack?e.stack.split("\n")[1]:void 0}},t.prototype.serialiseErrorEvent=function(e){return{message:e.message,fileName:e.filename,lineNumber:e.lineno,columnNumber:e.colno}},t}(i.BufferingObservable);n.Logger=a,n.logger=new a},{"./BufferingObservable":10,"@yieldify/gendry-dragonglass":71}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./DeepEqual"),o=function(){function e(){this.subscribers=[],this.publishCount=0}return e.merge=function(t){var n=new e;return t.forEach(function(e){e.subscribe(function(e){n.publish(e)})}),n},e.map=function(t,n){var r=new e;return t.subscribe(function(e){return r.publish(n(e))}),r},e.pluck=function(t,n){return e.map(t,function(e){return e[n]})},e.fromSelector=function(t,n){var r,o=new e;return n.subscribe(function(){var e=t(n.getState());e!==r&&(o.publish(e),r=e)}),o},e.prototype.subscribe=function(e){if(this.subscribers.indexOf(e)!==-1)throw new Error("Cannot subscribe more than once");return this.subscribers.push(e),this.createSubscription(e)},e.prototype.publish=function(e){for(var t=this.subscribers.map(function(e){return e}),n=0;n<t.length;n++)t[n](e);this.publishCount++},e.prototype.filter=function(t){var n=new e,r=this;return this.subscribe(function(e){t(e,r.publishCount,r)&&n.publish(e)}),n},e.prototype.waitFor=function(e){var t=this;return new Promise(function(n){t.subscribe(function(t){r.DeepEqual.deepEqual(t,e)&&n(t)})})},e.prototype.nextValue=function(){var e=this;return new Promise(function(t){var n=e.subscribe(function(e){n.dispose(),t(e)})})},e.prototype.dispatchAs=function(e,t){return this.subscribe(function(n){return t.dispatch(e(n))})},e.prototype.createSubscription=function(e){var t=this;return{dispose:function(){var n=t.subscribers.indexOf(e);n>-1&&t.subscribers.splice(n,1)}}},e}();n.Observable=o},{"./DeepEqual":12}],16:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Observable"),i=function(e){function t(t,n){var r=e.call(this)||this;return r.eventConverter=t,r.eventObservable=n,r.eventObservable.subscribe(function(e){r.publish(r.serialiseEvent(e))}),r}return r(t,e),t.prototype.serialiseEvent=function(e){return this.eventConverter.toSerialisable(e)},t}(o.Observable);n.ObservableEventSerialiser=i},{"./Observable":15}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("@yieldify/gendry-dragonglass"),o=365,i=864e5,s=function(){function e(){}return e.generateCookieStr=function(t){var n;n=encodeURIComponent(t.content);var r,i=encodeURIComponent(t.name);return r="undefined"!=typeof t.expiration?t.expiration.toUTCString():e.calculateExpiryDate(o).toUTCString(),[i,"=",n,"; expires="+r,t.domain&&"; domain="+t.domain,t.path&&"; path="+t.path,t.httpOnly?"; httpOnly":"",t.secure?"; secure":""].join("")},e.parseCookieStr=function(e){var t=e?e.split("; "):[],n=t.map(function(e){var t=e.split("="),n=t[0],r=t.slice(1).join("=");'"'===r.charAt(0)&&(r=r.slice(1,-1));try{r=decodeURIComponent(r)}catch(o){}return{name:n,content:r}});return r.groupBy(n,function(e){return e.name})},e.calculateExpiryDate=function(e){var t=new Date;return t.setMilliseconds(t.getMilliseconds()+e*i),t},e}();n.CookieUtil=s},{"@yieldify/gendry-dragonglass":71}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("@yieldify/gendry-browser-compat"),o=e("../Observable");n.VALIDATION_ERROR_MSG="Dom Utils validation error";var i=function(){function e(e){this.documentLike=e}return e.prototype.drawByString=function(e,t){var n=this.documentLike.createElement("div");n.innerHTML=t.trim(),this.drawByElement(e,n.firstChild)},e.prototype.drawByElement=function(e,t){this.selectorHasMatches(e),this.documentLike.querySelector(e).appendChild(t)},e.prototype.setStyle=function(e,t,n){this.selectorHasMatches(e);var r=this.documentLike.querySelector(e);r.style[t]=n},e.prototype.getStyle=function(e,t){this.selectorHasMatches(e);var n=this.documentLike.querySelector(e);return n.style[t]},e.prototype.modifyAttribute=function(e,t,n){this.selectorHasMatches(e);var r=this.documentLike.querySelector(e);r.setAttribute(t,n)},e.prototype.modifyTextContent=function(e,t){this.selectorHasMatches(e);var n=this.documentLike.querySelector(e);n.textContent=t},e.prototype.listen=function(e,t,n){this.selectorHasMatches(e);for(var i=new o.Observable,s=this.documentLike.querySelectorAll(e),u=function(e){n&&e.preventDefault(),i.publish(e)},a=0;a<s.length;a++)r.EventTargetUtil.addEventListener(s[a],t,u);return i},e.prototype.scrape=function(e,t){for(var n=this,r=this.documentLike.querySelectorAll(e),o=t?function(e){return e.getAttribute(t)}:function(e){return n.elementText(e)},i=[],s=0;s<r.length;s++)if(this.isSelectElement(r[s])){var u=r[s],a=u.selectedIndex;i.push(o(u.item(a)))}else i.push(o(r[s]));return i},e.prototype.getInputValue=function(e){var t=this.selectOnlyOneElement(e);if("undefined"==typeof t.value)throw new Error("selected element is not an input");return t.value},e.prototype.setInputValue=function(e,t){var n=this.selectOnlyOneElement(e);if(["textarea","input"].indexOf(n.tagName.toLowerCase())===-1)throw new Error("cannot set input value on a "+n.tagName+" element");n.value=t},e.prototype.getCheckedState=function(e){var t=this.selectOnlyOneElement(e);if("undefined"==typeof t.checked)throw new Error("selected element is not a checkbox");return t.checked},e.prototype.clickElement=function(e){var t=this.selectOnlyOneElement(e);t.click()},e.prototype.dispatchEvent=function(e,t){var n=this.selectOnlyOneElement(e);r.EventTargetUtil.dispatchEvent(n,t)},e.prototype.validateSelector=function(e){try{this.documentLike.querySelectorAll(e)}catch(t){return!1}return!0},e.prototype.getBoundingClientRect=function(e){var t=this.selectOnlyOneElement(e),n=t.getBoundingClientRect();return{top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width}},e.prototype.getReferrer=function(){return document.referrer},e.prototype.elementText=function(e){return e.textContent.replace(/\s+/g," ").replace(/\n/g," ")},e.prototype.selectorHasMatches=function(e){if(!this.documentLike.querySelector(e))throw new Error(n.VALIDATION_ERROR_MSG)},e.prototype.selectOnlyOneElement=function(e){var t=this.documentLike.querySelectorAll(e);if(1!==t.length)throw new Error("it should be only one element selected: got "+t.length);return t[0]},e.prototype.isSelectElement=function(e){return/^select$/i.test(e.tagName)},e}();n.DOMUtil=i},{"../Observable":15,"@yieldify/gendry-browser-compat":48}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("@yieldify/gendry-browser-compat"),o=e("../Observable"),i=e("../CachingObservable");n.URL_PUBLISH_INTERVAL_MILLISECONDS=500,n.WINDOW_DIMENSION_CHECK_INTERVAL_MILLISECONDS=1e3;var s="complete";n.IS_IOS_11=window.navigator&&"string"==typeof window.navigator.appVersion&&window.navigator.appVersion.indexOf("iPhone OS 11")>=0;var u=function(){function e(e){this.windowLike=e}return e.prototype.listen=function(e){var t=new o.Observable,n=function(e){t.publish(e)};return r.EventTargetUtil.addEventListener(this.windowLike,e,n),t},e.prototype.observeLocation=function(){var e=this;if(!this.locationObservable){this.locationObservable=new i.CachingObservable;var t=function(){e.locationObservable.publishIfChanged(e.getLocation())};setInterval(t,n.URL_PUBLISH_INTERVAL_MILLISECONDS)}return this.locationObservable},e.prototype.getLocation=function(){return{hash:this.windowLike.location.hash,host:this.windowLike.location.host,hostname:this.windowLike.location.hostname,href:this.windowLike.location.href,pathname:this.windowLike.location.pathname,port:this.windowLike.location.port,protocol:this.windowLike.location.protocol,search:this.windowLike.location.search}},e.prototype.getInnerDimensions=function(){var e={height:this.windowLike.innerHeight,width:this.windowLike.innerWidth,deviceScale:this.windowLike.devicePixelRatio||1};return n.IS_IOS_11&&(e._iOS11_top=this.windowLike.scrollY),e},e.prototype.observeInnerDimensions=function(){var e=this;if(!this.dimensionsObservable){this.dimensionsObservable=new i.CachingObservable;var t=function(){e.dimensionsObservable.publishIfChanged(e.getInnerDimensions())};this.listen("resize").subscribe(t),n.IS_IOS_11&&this.listen("scroll").subscribe(t),setInterval(t,n.WINDOW_DIMENSION_CHECK_INTERVAL_MILLISECONDS)}return this.dimensionsObservable},e.prototype.assetsLoaded=function(){var e=this;return new Promise(function(t){e.windowLike.document.readyState===s?t(void 0):e.listen("load").subscribe(function(e){t(void 0)})})},e.prototype.redirect=function(e){this.windowLike.location.href=e},e}();n.WindowUtil=u},{"../CachingObservable":11,"../Observable":15,"@yieldify/gendry-browser-compat":48}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./SerialisableEvent"),o=e("./SerialisableMouseEvent");n.SERIALISATION_DESCS=[r.EVENT_SERIALISATION_DESC,o.MOUSEEVENT_SERIALISATION_DESC];var i=function(){function e(e){this.serialisationDescs=e}return e.prototype.toSerialisable=function(e){for(var t={},n=0,r=this.serialisationDescs;n<r.length;n++){
var o=r[n];e instanceof o.ctor&&(this.copyProperties(e,t,o.safeProps),t.target=this.buildRepresentativeTarget(e))}return t},e.prototype.copyProperties=function(e,t,n){for(var r=0,o=n;r<o.length;r++){var i=o[r];this.isPrimitive(e[i])&&(t[i]=e[i])}},e.prototype.buildRepresentativeTarget=function(e){if(e.target){var t=e.target;return{tagName:t.tagName}}},e.prototype.isPrimitive=function(e){return["boolean","string","number"].indexOf(typeof e)>-1},e}();n.EventConverter=i},{"./SerialisableEvent":21,"./SerialisableMouseEvent":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.EVENT_SERIALISATION_DESC={ctor:Event,safeProps:["bubbles","cancelable","defaultPrevented","eventPhase","timeStamp","type","isTrusted"]}},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MOUSEEVENT_SERIALISATION_DESC={ctor:MouseEvent,safeProps:["altKey","ctrlKey","metaKey","shiftKey","button","buttons","clientX","clientY","movementX","movementY","screenX","screenY"]}},{}],23:[function(e,t,n){"use strict";function r(e){function t(e,n){function r(r){function o(e,t){return void 0===t&&(t=!1),n(function(n){var o=e(u);return o===u?n:!t&&s.DeepEqual.deepEqual(o,u)?n:i({},n,(a={},a[r]=o,a));var a},!0)}var u=e[r];return{get:t(u,o),set:o}}return r}var n=function(t,n){return void 0===n&&(n=!1),t(e)};return{get:t(e,n),set:n}}function o(e){return function(t){return i({},t,e(t))}}var i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./DeepEqual");n.update=r,n.partial=o},{"./DeepEqual":12}],24:[function(e,t,n){"use strict";function r(e){return"number"==typeof e&&!isNaN(e)}function o(e){y=new RegExp("(^#|.*&)"+b+"($|&.*)").test(e.location.hash)}function i(){y=!1}function s(){return y}function u(e){return y===!1?e:e.indexOf("#")>=0?e+"&"+b:e+"#"+b}function a(e){return e.location.hash?e.location.hash.substring(1):""}function c(e,t){return t?e.indexOf("#")>=0?e+"&"+t:e+"#"+t:e}function l(e){var t={};for(var n in e){if(e[n]in e)throw new Error('Value "'+e[n]+'" is already a key in the lookup table');t[n]=e[n],t[e[n]]=n}return t}function f(e){if(!e||0===e.length)return"";var t=e.reduce(function(e,t){return e+(t===!0?"1":"0")},""),n=parseInt(t,2),r=n.toString(36);return r}function p(e,t){if(""===e){if(0!==t)throw new Error("More bits than expected are encoded");return[]}var n=parseInt(e,36),r=n.toString(2),o=r.split("").map(function(e){return"1"===e}),i=t-o.length;if(isNaN(n))throw new Error("Input not parsable into base 36");if(i<0)throw new Error("More bits than expected are encoded");var s=d(i,!1);return s.concat(o)}function d(e,t){var n=Array.apply(null,Array(e));return n.map(function(){return t})}function h(e){var t=g.map(g.entries(e),function(e){return e.key+":"+e.value});return t.join(";")}function v(e,t,n){return void 0===n&&(n="Promise timed out after "+e+"ms"),Promise.race([t,new Promise(function(t,r){setTimeout(function(){r(new Error(n))},e)})])}Object.defineProperty(n,"__esModule",{value:!0});var y,g=e("@yieldify/gendry-dragonglass"),b="yidebug";n.isValidNumber=r,n.initialiseDebugMode=o,n.resetDebugMode=i,n.isDebugMode=s,n.addDebugParameter=u,n.getHash=a,n.addHashParameters=c,n.createTranslationTable=l,n.toBitVector=f,n.fromBitVector=p,n.generateCssText=h,n.timeout=v},{"@yieldify/gendry-dragonglass":71}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){this.registry=void 0}return e.methodNotImplemented=function(e){return function(){return Promise.reject(new Error(e+" is not implemented by this module"))}},e.prototype.setRegistry=function(e){this.registry=e},e.prototype.invokeMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.validateCall(e),!this.registry)throw new Error("Registry has not been defined");return(r=this.registry).invokeMethod.apply(r,[this.getRoutingLabel(),e].concat(t));var r},e.prototype.invokeStream=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.validateCall(e),!this.registry)throw new Error("Registry has not been defined");return(r=this.registry).invokeStream.apply(r,[this.getRoutingLabel(),e].concat(t));var r},e.prototype.toJSON=function(){return{label:this.getRoutingLabel()}},e.prototype.validateCall=function(e){if("function"!=typeof this["interface"]()[e])throw new Error("Invoked method is not part of the interface")},e}();n.BaseModule=r},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){this.modules={}}return e.prototype.register=function(e){var t=e.getRoutingLabel();if(t in this.modules)throw new Error("Cannot register two modules with the same routing label: "+t);this.modules[e.getRoutingLabel()]=e,e.setRegistry(this)},e.prototype.registerAll=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.register(r)}},e.prototype.getModuleByClass=function(e){for(var t in this.modules){var n=this.getModuleByLabel(t);if(n instanceof e)return n}},e.prototype.getModuleByLabel=function(e){return this.modules[e]},e.prototype.toJSON=function(){return{modules:this.modules}},e}();n.ModuleRegistry=r},{}],27:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseModule"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getRoutingLabel=function(){return"cookie"},t.prototype["interface"]=function(){return{getCookie:this.getCookie,getCookies:this.getCookies,setCookie:this.setCookie,deleteCookie:this.deleteCookie}},t}(o.BaseModule);n.CookieBase=i},{"../BaseModule":25}],28:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Base"),i=e("../../../lib/browser/CookieUtil"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setCookie=function(e){try{return document.cookie=i.CookieUtil.generateCookieStr(e),Promise.resolve()}catch(t){return Promise.reject(t)}},t.prototype.deleteCookie=function(e,t){var n=new Date;return n.setTime(0),this.setCookie({name:e,content:"",domain:t||void 0,path:"/",expiration:n})},t.prototype.getCookie=function(e){try{var t=i.CookieUtil.parseCookieStr(document.cookie)[e]||[];return Promise.resolve(t[0])}catch(n){return Promise.reject(n)}},t.prototype.getCookies=function(e){try{return Promise.resolve(i.CookieUtil.parseCookieStr(document.cookie)[e]||[])}catch(t){return Promise.reject(t)}},t}(o.CookieBase);n.CookieHost=s},{"../../../lib/browser/CookieUtil":17,"./Base":27}],29:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseModule"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getRoutingLabel=function(){return"dom"},t.prototype["interface"]=function(){return{draw:this.draw,setStyle:this.setStyle,getStyle:this.getStyle,modifyAttribute:this.modifyAttribute,listen:this.listen,createValueScraper:this.createValueScraper,startScraping:this.startScraping,stopScraping:this.stopScraping,getInputValue:this.getInputValue,setInputValue:this.setInputValue,getCheckedState:this.getCheckedState,clickElement:this.clickElement,getReferrer:this.getReferrer,getBoundingClientRect:this.getBoundingClientRect}},t}(o.BaseModule);n.DOMBase=i},{"../BaseModule":25}],30:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Base"),i=e("@yieldify/gendry-browser-compat"),s=e("../../../app/model/page/scraper/ValueScraper"),u=e("../../../lib/ObservableEventSerialiser"),a=e("../../../lib/Observable"),c=e("../../../lib/AsyncWorker"),l=function(e){function t(t,n){var r=e.call(this)||this;return r.domUtil=t,r.eventConverter=n,r.valueScraperMap={},r.scraperId=0,r}return r(t,e),t.prototype.draw=function(e,t){try{return this.domUtil.drawByString(e,t),Promise.resolve()}catch(n){return Promise.reject(n)}},t.prototype.setStyle=function(e,t,n){try{return this.domUtil.setStyle(e,t,n),Promise.resolve()}catch(r){return Promise.reject(r)}},t.prototype.getStyle=function(e,t){try{return Promise.resolve(this.domUtil.getStyle(e,t))}catch(n){return Promise.reject(n)}},t.prototype.modifyAttribute=function(e,t,n){try{return this.domUtil.modifyAttribute(e,t,n),Promise.resolve()}catch(r){return Promise.reject(r)}},t.prototype.listen=function(e,t,n){try{return new u.ObservableEventSerialiser(this.eventConverter,this.domUtil.listen(e,t,n))}catch(r){return new a.Observable}},t.prototype.createValueScraper=function(e,t){try{var n=this.nextScraperId(),r=new s.ValueScraper(this.domUtil,new c.AsyncWorker,e,t);return this.valueScraperMap[n]=r,Promise.resolve(n)}catch(o){return Promise.reject(o)}},t.prototype.startScraping=function(e){var t=this.getValueScraper(e);return t.start(),t.getValuesObservable()},t.prototype.stopScraping=function(e){try{return this.getValueScraper(e).stop(),Promise.resolve()}catch(t){return Promise.reject(t)}},t.prototype.getInputValue=function(e){try{return Promise.resolve(this.domUtil.getInputValue(e))}catch(t){return Promise.reject(t)}},t.prototype.setInputValue=function(e,t){try{var n=(new i.EventBuilder).setEventType("input").build();return this.domUtil.setInputValue(e,t),this.domUtil.dispatchEvent(e,n),Promise.resolve()}catch(r){return Promise.reject(r)}},t.prototype.getCheckedState=function(e){try{return Promise.resolve(this.domUtil.getCheckedState(e))}catch(t){return Promise.reject(t)}},t.prototype.clickElement=function(e){try{return Promise.resolve(this.domUtil.clickElement(e))}catch(t){return Promise.reject(t)}},t.prototype.getReferrer=function(){try{return Promise.resolve(this.domUtil.getReferrer())}catch(e){return Promise.reject(e)}},t.prototype.getBoundingClientRect=function(e){try{return Promise.resolve(this.domUtil.getBoundingClientRect(e))}catch(t){return Promise.reject(t)}},t.prototype.nextScraperId=function(){return this.scraperId+=1},t.prototype.getValueScraper=function(e){return this.valueScraperMap[e]},t}(o.DOMBase);n.DOMHost=l},{"../../../app/model/page/scraper/ValueScraper":6,"../../../lib/AsyncWorker":9,"../../../lib/Observable":15,"../../../lib/ObservableEventSerialiser":16,"./Base":29,"@yieldify/gendry-browser-compat":48}],31:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseModule");n.CREATE_IFRAME_METHOD="createIFrame",n.START_PROXYING_METHOD="startProxying",n.SEND_METHOD="send",n.RECEIVE_METHOD="receive";var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getRoutingLabel=function(){return"iframe"},t}(o.BaseModule);n.IFrameBase=i},{"../BaseModule":25}],32:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/Logger"),i=e("../BaseModule"),s=e("./Base"),u=function(e){function t(t){var n=e.call(this)||this;return n.iframeCreator=t,n.connections={},n.numConnections=0,n}return r(t,e),t.prototype.createIFrame=function(e){var t=this;return this.iframeCreator.create(e).then(function(e){var n=t.numConnections++;return t.connections[n]=e,Promise.resolve(n)})},t.prototype.startProxying=function(e){var t=this;try{this.getConnection(e).receive(function(n){t.proxyReceivedData(e,n)})}catch(n){throw o.logger.error({error:n,connectionId:e},"Erroring starting to proxy connection"),n}},t.prototype.send=function(e,t){try{this.getConnection(e).send(t)}catch(n){throw o.logger.error({error:n,connectionId:e,data:t},"Error attempting to send data to connection"),n}},t.prototype["interface"]=function(){var e=this;return t={},t[s.CREATE_IFRAME_METHOD]=function(t){return e.createIFrame(t)},t[s.START_PROXYING_METHOD]=function(t){return new Promise(function(n){n(e.startProxying(t))})},t[s.SEND_METHOD]=function(t,n){return new Promise(function(r){return r(e.send(t,n))})},t[s.RECEIVE_METHOD]=i.BaseModule.methodNotImplemented(s.RECEIVE_METHOD),t;var t},t.prototype.getConnection=function(e){var t=this.connections[e];if(t)return t;throw new Error("Non-existent iframe connection id")},t.prototype.proxyReceivedData=function(e,t){return this.invokeMethod(s.RECEIVE_METHOD,e,t)},t}(s.IFrameBase);n.IFrameHost=u},{"../../../lib/Logger":14,"../BaseModule":25,"./Base":31}],33:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseModule"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getRoutingLabel=function(){return"localStorage"},t.prototype["interface"]=function(){return{getItem:this.getItem,setItem:this.setItem,removeItem:this.removeItem}},t}(o.BaseModule);n.LocalStorageBase=i},{"../BaseModule":25}],34:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Base"),i=function(e){function t(t){var n=e.call(this)||this;return n.localStorage=t,n}return r(t,e),t.prototype.setItem=function(e,t){try{return this.localStorage.setItem(e,t),Promise.resolve()}catch(n){return Promise.reject(n)}},t.prototype.getItem=function(e){try{return Promise.resolve(this.localStorage.getItem(e))}catch(t){return Promise.reject(t)}},t.prototype.removeItem=function(e){try{return Promise.resolve(this.localStorage.removeItem(e))}catch(t){return Promise.reject(t)}},t}(o.LocalStorageBase);n.LocalStorageHost=i},{"./Base":33}],35:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../BaseModule"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getRoutingLabel=function(){return"window"},t.prototype["interface"]=function(){return{listen:this.listen,observeLocation:this.observeLocation,getInnerDimensions:this.getInnerDimensions,observeInnerDimensions:this.observeInnerDimensions,redirect:this.redirect}},t}(o.BaseModule);n.WindowBase=i},{"../BaseModule":25}],36:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/ObservableEventSerialiser"),i=e("./Base"),s=function(e){function t(t,n){var r=e.call(this)||this;return r.windowUtil=t,r.eventConverter=n,r}return r(t,e),t.prototype.listen=function(e){return new o.ObservableEventSerialiser(this.eventConverter,this.windowUtil.listen(e))},t.prototype.observeLocation=function(){return this.windowUtil.observeLocation()},t.prototype.getInnerDimensions=function(){return Promise.resolve(this.windowUtil.getInnerDimensions())},t.prototype.observeInnerDimensions=function(){return this.windowUtil.observeInnerDimensions()},t.prototype.redirect=function(e){var t=this;return new Promise(function(n,r){try{t.windowUtil.redirect(e),n(void 0)}catch(o){r(o)}})},t}(i.WindowBase);n.WindowHost=s},{"../../../lib/ObservableEventSerialiser":16,"./Base":35}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("@yieldify/gendry-browser-compat"),o=e("./connection/CrossOriginConnection"),i=e("./HandshakeMessage"),s=function(){function e(e){this.source=e}return e.prototype.listen=function(e){var t=this;return new Promise(function(n,s){var u=function(s){if(s.source===e.contentWindow&&s.data===i.HandshakeMessage.CONNECT){r.EventTargetUtil.removeEventListener(t.source,"message",u,!0);var a=new o.CrossOriginConnection(t.source,e.contentWindow);a.send(i.HandshakeMessage.READY),n(a)}};r.EventTargetUtil.addEventListener(t.source,"message",u,!0)})},e}();n.CrossOriginServer=s},{"./HandshakeMessage":38,"./connection/CrossOriginConnection":43,"@yieldify/gendry-browser-compat":48}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HandshakeMessage={CONNECT:"CONNECT",READY:"READY"}},{}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../lib/Logger"),o=function(){function e(e,t,n){this.crossOriginServer=e,this.domUtil=n,this.doc=t}return e.prototype.create=function(e){var t=this.doc.createElement("iframe");t.src=e.src,t.name=e.name,t.style.display="none";var n=this.crossOriginServer.listen(t);try{this.domUtil.drawByElement(e.parentElement,t)}catch(o){return r.logger.error({selector:e.parentElement,error:o},"Unable to append iframe to the DOM"),Promise.reject(o)}return n},e}();n.IFrameCreator=o},{"../../lib/Logger":14}],40:[function(e,t,n){"use strict";function r(){var e=null,t=null,n=new Promise(function(n,r){e=n,t=r});return{promise:n,resolve:e,reject:t}}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../lib/Observable"),s=e("../../lib/Logger"),u=e("./RemoteWindowMessage"),a=e("./connection/JSONConnection"),c=e("../modules/ModuleRegistry"),l=function(e){function t(t){var n=e.call(this)||this;return n.responseCallbacks={},n.connection=t,n.messageId=0,n.config=void 0,n.startReceived=!1,n}return o(t,e),t.connect=function(e,n){return void 0===n&&(n={}),function(r){var o=new a.JSONConnection(e,r),i=new t(o);return n.provide&&i.registerAll(n.provide),i.start(n.initConfig)}},t.prototype.start=function(e){var t=this;return new Promise(function(n,r){t.connection.receive(function(e){if(t.startReceived)t.handler(e);else try{t.parseStartMessage(e),n(t)}catch(o){r(o)}}),t.connection.send({id:0,type:u.MessageType.START,target:"-",method:"-",data:e})})},t.prototype.getConfig=function(){return this.config},t.prototype.invokeMethod=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i=r();return this.invoke.apply(this,[i,e,t].concat(n)),i.promise},t.prototype.invokeStream=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=new i.Observable;return this.invoke.apply(this,[o,e,t].concat(n)),o},t.prototype.toJSON=function(){return{config:this.config}},t.prototype.invoke=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var i=this.nextMessageId();this.connection.send({id:i,type:u.MessageType.CALL,target:t,method:n,data:r}),this.responseCallbacks[i]=e},t.prototype.parseStartMessage=function(e){if(e.type!==u.MessageType.START)throw new Error("Received a non-START message while waiting for START");this.startReceived=!0,this.config=e.data},t.prototype.respond=function(e,t){this.connection.send({id:e.id,type:u.MessageType.RESPONSE,target:e.target,method:e.method,data:t})},t.prototype.respondError=function(e,t){this.connection.send({id:e.id,type:u.MessageType.ERROR,target:e.target,method:e.method,data:t.message})},t.prototype.handleCall=function(e){var t=this;this.validateCall(e);var n=this.getModuleByLabel(e.target),r=n["interface"]()[e.method].apply(n,e.data),o=function(n){t.respond(e,n)},u=function(n){s.logger.debug({error:n},"Call resulted in an error"),t.respondError(e,n)};if(r instanceof Promise){var a=r;a.then(o,u)}else if(r instanceof i.Observable){var c=r;c.subscribe(o)}},t.prototype.handleResponse=function(e){this.validateResponse(e);var t=this.responseCallbacks[e.id];if(t instanceof i.Observable){var n=t;n.publish(e.data)}else delete this.responseCallbacks[e.id],t.resolve(e.data)},t.prototype.handleError=function(e){this.validateResponse(e);var t=this.responseCallbacks[e.id];t instanceof i.Observable?s.logger.error({message:e},"Cant pass error message to observable"):(t.reject(new Error(e.data)),delete this.responseCallbacks[e.id])},t.prototype.handler=function(e){if(e.type===u.MessageType.CALL)this.handleCall(e);else if(e.type===u.MessageType.RESPONSE)this.handleResponse(e);else{if(e.type!==u.MessageType.ERROR)throw new Error("Invalid message type");this.handleError(e)}},t.prototype.nextMessageId=function(){return this.messageId+=1},t.prototype.validateCall=function(e){if(!e.id||isNaN(e.id))throw new Error("message does not contain a valid id");if(!e.target)throw new Error("message does not contain a valid target");if(!this.getModuleByLabel(e.target))throw new Error("message does not contain a valid target of: "+e.target);if("function"!=typeof this.getModuleByLabel(e.target)["interface"]()[e.method])throw new Error("method should be a valid function: "+e.method)},t.prototype.validateResponse=function(e){if(!e.id||isNaN(e.id))throw new Error("message does not contain a valid id")},t}(c.ModuleRegistry);n.RemoteWindow=l},{"../../lib/Logger":14,"../../lib/Observable":15,"../modules/ModuleRegistry":26,"./RemoteWindowMessage":41,"./connection/JSONConnection":44}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;!function(e){e[e.START=0]="START",e[e.CALL=1]="CALL",e[e.RESPONSE=2]="RESPONSE",e[e.ERROR=3]="ERROR"}(r=n.MessageType||(n.MessageType={}))},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../lib/BufferingObservable"),o=e("../../../lib/DeepEqual"),i=function(){function e(){this.messages=new r.BufferingObservable}return e.prototype.receive=function(e){return this.messages.subscribe(e)},e.prototype.awaitMessage=function(e){var t=this;return new Promise(function(n,r){var i=t.receive(function(s){o.DeepEqual.deepEqual(e,s)?(n(t),i.dispose()):r(new Error("Unexpected message received: "+s))})})},e.prototype.receivedMessage=function(e){this.messages.publish(e)},e}();n.Connection=i},{"../../../lib/BufferingObservable":10,"../../../lib/DeepEqual":12}],43:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("@yieldify/gendry-browser-compat"),i=e("./Connection"),s=e("../../../lib/Logger");n.ORIGIN_WILDCARD="*",n.MSG_PREFIX="/* yieldify */ ";var u=function(e){function t(t,n){var r=e.call(this)||this;return r.target=n,o.EventTargetUtil.addEventListener(t,"message",function(e){r.messageHandler(e)},!1),r}return r(t,e),t.prototype.send=function(e){var t=n.MSG_PREFIX+e;this.target.postMessage(t,n.ORIGIN_WILDCARD)},t.prototype.messageHandler=function(e){var t,r=e.origin,o=e.data;if(e.source===this.target)if("string"!=typeof o)s.logger.warn({origin:r},"CrossOriginConnection received a message with non-string data"),s.logger.debug({message:o},"Message with non-string data");else{var i=o.slice(0,n.MSG_PREFIX.length);i!==n.MSG_PREFIX?(s.logger.warn({origin:r},"CrossOriginConnection received a message without a prefix"),s.logger.debug({message:o},"Message without a prefix")):(t=o.slice(n.MSG_PREFIX.length),this.receivedMessage(t))}},t}(i.Connection);n.CrossOriginConnection=u},{"../../../lib/Logger":14,"./Connection":42,"@yieldify/gendry-browser-compat":48}],44:[function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../lib/Logger"),i=e("./Connection"),s=function(e){function t(t,n){var r=e.call(this)||this;return r.json=t,r.underlyingConnection=n,r.underlyingConnection.receive(function(e){r.stringMessageHandler(e)}),r}return r(t,e),t.prototype.send=function(e){this.underlyingConnection.send(this.json.stringify(e))},t.prototype.stringMessageHandler=function(e){var t;try{t=this.json.parse(e)}catch(n){return void o.logger.error({message:e},"Unable to parse received message as JSON")}this.receivedMessage(t)},t}(i.Connection);n.JSONConnection=s},{"../../../lib/Logger":14,"./Connection":42}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){this.eventName="Event",this.eventConstructor=Event,this.eventType="test",this.canBubble=!0,this.cancelBubble=!0,this.isCancelable=!0}return e.prototype.setEventConstructor=function(e,t){return this.eventName=e,this.eventConstructor=t,this},e.prototype.setEventType=function(e){return this.eventType=e,this},e.prototype.setCanBubble=function(e){return this.canBubble=e,this},e.prototype.setIsCancelable=function(e){return this.isCancelable=e,this},e.prototype.initNewEvent=function(){return new this.eventConstructor(this.eventType)},e.prototype.initOldEvent=function(e){e.initEvent(this.eventType,this.canBubble,this.isCancelable)},e.prototype.build=function(){try{return this.initNewEvent()}catch(e){var t=document.createEvent(this.eventName);return this.initOldEvent(t),t}},e}();n.EventBuilder=r},{}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.addEventListener=function(t,n,r,o){if(e.isStandardsEventTarget(t))t.addEventListener(n,r,o);else{if(!e.isMSEventTarget(t))throw new TypeError("object is not an EventTarget");t.attachEvent("on"+n,r)}},e.removeEventListener=function(t,n,r,o){if(e.isStandardsEventTarget(t))t.removeEventListener(n,r,o);else{if(!e.isMSEventTarget(t))throw new TypeError("object is not an EventTarget");t.detachEvent("on"+n,r)}},e.dispatchEvent=function(t,n){if(e.isStandardsEventTarget(t))t.dispatchEvent(n);else{if(!e.isMSEventTarget(t))throw new TypeError("object is not an EventTarget");t.fireEvent(n.type,n)}},e.isStandardsEventTarget=function(e){return"object"==typeof e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener&&"function"==typeof e.dispatchEvent},e.isMSEventTarget=function(e){return"object"==typeof e&&"function"==typeof e.attachEvent&&"function"==typeof e.detachEvent&&"function"==typeof e.fireEvent},e}();n.EventTargetUtil=r},{}],47:[function(e,t,n){"use strict";function r(e){return new s.Promise(function(t,n){var r=new XMLHttpRequest;if(r.open(e.method,e.uri),null!=e.headers)for(var a=0,c=s.keys(e.headers);a<c.length;a++){var l=c[a];r.setRequestHeader(l,e.headers[l])}u.EventTargetUtil.addEventListener(r,"load",o(r,t,n)),u.EventTargetUtil.addEventListener(r,"error",i(r,n)),"POST"===e.method?r.send(e.data):r.send()})}function o(e,t,n){return function(){if(/2\d\d/.test(e.status.toString())){var r=e.responseText;t(r)}else n(new Error(e.statusText))}}function i(e,t){return function(){t(new Error("Network Error"))}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("@yieldify/gendry-dragonglass"),u=e("./EventTargetUtil");n.sendHttpRequest=r},{"./EventTargetUtil":46,"@yieldify/gendry-dragonglass":53}],48:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("./EventTargetUtil")),r(e("./EventBuilder")),r(e("./httpUtil"))},{"./EventBuilder":45,"./EventTargetUtil":46,"./httpUtil":47}],49:[function(e,t,n){"use strict";function r(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}function o(e,t){void 0===t&&(t=n.lastValueWins);for(var r={},o=0,i=e;o<i.length;o++){var s=i[o];void 0!==r[s.key]&&(s=t({key:s.key,value:r[s.key]},s)),r[s.key]=s.value}return r}function i(e){var t=e.map(function(e){var t=e.key,n=e.value;return{key:t,value:[n]}});return o(t,function(e,t){return{key:e.key,value:e.value.concat(t.value)}})}function s(e){var t=[];for(var n in e)for(var r=0,o=e[n];r<o.length;r++){var i=o[r];t.push({key:n,value:i})}return t}function u(e,t){return o(r(e).map(t))}function a(e,t){return u(e,function(e){var n=e.key,r=e.value;return{key:n,value:t(r,n)}})}Object.defineProperty(n,"__esModule",{value:!0}),n.entries=r,n.lastValueWins=function(e,t){return t},n.dict=o,n.multiDict=i,n.multiDictEntries=s,n.dictMap=u,n._dictMap=function(e){return function(t){return u(t,e)}},n.dictMapValues=a,n._dictMapValues=function(e){return function(t){return a(t,e)}}},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./function"),o=function(){function e(e){var t=this;if(this.status=i.PENDING,this.queue=[],"function"==typeof e)try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(n){this.reject(n)}}return e.resolve=function(t){return new e(function(n,r){"undefined"==typeof t?n(void 0):t instanceof e?t.then(n,r):n(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.all=function(t){return 0===t.length?e.resolve([]):new e(function(e,n){var r=[],o=0;t.forEach(function(i,s){i.then(function(n){r[s]=n,o+=1,o===t.length&&e(r)},function(e){n(e)})})})},e.race=function(t){return new e(function(e,n){
var r=!1;for(var o in t)t[o].then(function(t){r||(r=!0,e(t))},function(e){r||(r=!0,n(e))})})},e.prototype.then=function(t,n){var r={onFulfilled:t,onRejected:n,promise:new e};return this.queue.push(r),this.status===i.FULFILLED?this.resolve(this.resolution):this.status===i.REJECTED&&this.reject(this.error),r.promise},e.prototype["catch"]=function(e){return this.then(r.identity,e)},e.prototype.resolve=function(e){this.status=i.FULFILLED,this.resolution=e;var t=this.queue.shift();try{for(;t;){var n=t.onFulfilled(e);this.resolveValue(n,t),t=this.queue.shift()}}catch(r){setTimeout(function(){return t.promise.reject(r)},0)}},e.prototype.reject=function(e){this.status=i.REJECTED,this.error=e;var t=this.queue.shift();try{for(;t;){if("function"==typeof t.onRejected){var n=t.onRejected(e);this.resolveValue(n,t)}else setTimeout(t.promise.reject.bind(t.promise,e),0);t=this.queue.shift()}}catch(e){setTimeout(function(){return t.promise.reject(e)},0)}},e.prototype.timeout=function(t,n){return void 0===n&&(n="Promise timed out after "+t+"ms"),e.race([this,new e(function(e,r){setTimeout(function(){r(new Error(n))},t)})])},e.prototype.resolveValue=function(t,n){t instanceof e?t.then(function(e){setTimeout(n.promise.resolve.bind(n.promise,e),0)},function(e){setTimeout(n.promise.reject.bind(n.promise,e),0)}):setTimeout(n.promise.resolve.bind(n.promise,t),0)},e}();n.Promise=o;var i;!function(e){e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.FULFILLED=2]="FULFILLED"}(i||(i={}))},{"./function":52}],51:[function(e,t,n){"use strict";function r(e){return function(t){if(b.isMissing(t))return null;var n=e(t);return b.isMissing(n)?null:n}}function o(e){return function(t){for(var n in t)if(b.isMissing(t[n]))return null;var r=e(t);return b.isMissing(r)?null:r}}function i(e,t,n){var r=m.mapValues(e,t);return g.mapSelector(r,o(n))}function s(e,t,n){var o=e.map(t);return g.selector(u(o),r(n))}function u(e){if(0===e.length)return function(){return[]};var t=e[0],n=u(e.slice(1));return g.mapSelector({head:t,tail:n},o(function(e){var t=e.head,n=e.tail;return[t].concat(n)}))}function a(e){return g.selector(e,r(function(e){var t=Math.max(e,0),n=function(e){return Math.floor(e)===e},r=n(t)?t.toFixed(0):t.toFixed(2);return r}))}function c(e){switch(e.dataType){case"string":return f(e);case"number":return p(e);case"boolean":return d(e);default:throw new Error("Unknown expression data type")}}function l(e){switch(e.dataType){case"string":return f(e);case"number":return a(p(e));default:throw new Error("Unknown expression data type")}}function f(e){switch(e.type){case"variable":return O(e.name);case"string-literal":return function(t){return e.value};case"concat":return s(e.value,l,function(e){return e.join("")});case"if":return h(d(e.condition),f(e.then),f(e["else"]));default:throw new Error("Unknown string expression type")}}function p(e){switch(e.type){case"variable":return M(e.name);case"numeric-literal":return function(t){return e.value};case"arithmetic":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t-n});case"if":return h(d(e.condition),p(e.then),p(e["else"]));case"add":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t+n});case"subtract":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t-n});case"multiply":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t*n});case"divide":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return 0===n?null:t/n});default:throw new Error("Unknown numeric expression type")}}function d(e){switch(e.type){case"variable":return S(e.name);case"equals":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t===n});case"not":return i({val:e.value},d,function(e){var t=e.val;return!t});case"not-equals":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t!==n});case"greater-than":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t>n});case"less-than":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t<n});default:throw new Error("Unknown boolean expression type")}}function h(e,t,n){return g.mapSelector({condition:e,thenVal:t,elseVal:n},function(e){var t=e.condition,n=e.thenVal,r=e.elseVal;return b.isMissing(t)?null:t?b.isMissing(n)?null:n:b.isMissing(r)?null:r})}function v(e,t){var n=t.get(e);return n.map(function(e,n){return _.composeLens(t,_.listElement(n))})}function y(e){switch(e.type){case"arithmetic":return[_.property("lhs"),_.property("rhs")];case"add":return[_.property("lhs"),_.property("rhs")];case"subtract":return[_.property("lhs"),_.property("rhs")];case"multiply":return[_.property("lhs"),_.property("rhs")];case"divide":return[_.property("lhs"),_.property("rhs")];case"concat":return v(e,_.property("value"));case"if":return[_.property("condition"),_.property("then"),_.property("else")];case"equals":case"not-equals":return[_.property("lhs"),_.property("rhs")];case"greater-than":case"less-than":return[_.property("lhs"),_.property("rhs")];case"not":return[_.property("value")];case"numeric-literal":case"string-literal":case"variable":return[];default:throw new Error("Traversal not implemented for "+e.type+" expressions")}}Object.defineProperty(n,"__esModule",{value:!0});var g=e("./selector"),b=e("./typeGuards"),m=e("./object"),_=e("./lens"),E=e("./tree"),w=function(e){return function(t){return t[e]}},O=function(e){return g.selector(w(e),r(function(t){if("String"===t.dataType)return t.value;throw new Error("Expected Variable "+e+" to be a String")}))},M=function(e){return g.selector(w(e),r(function(t){if("Float"===t.dataType||"Integer"===t.dataType)return t.value;throw new Error("Expected Variable "+e+" to be a Float or Integer")}))},S=function(e){return g.selector(w(e),r(function(t){if("Boolean"===t.dataType)return t.value;throw new Error("Expected Variable "+e+" to be a Boolean")}))};n.buildExpression=c,n.stringLikeExpression=l,n.stringExpression=f,n.numericExpression=p,n.booleanExpression=d,n.subExpressions=y,n.traverseExpression=E.traverseTree(y)},{"./lens":54,"./object":56,"./selector":57,"./tree":59,"./typeGuards":60}],52:[function(e,t,n){"use strict";function r(e){return e}function o(){}Object.defineProperty(n,"__esModule",{value:!0}),n.identity=r,n.noop=o},{}],53:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("./Dictionary")),r(e("./Promise")),r(e("./list")),r(e("./function")),r(e("./object")),r(e("./selector")),r(e("./expression")),r(e("./string")),r(e("./url")),r(e("./uuid")),r(e("./tree")),r(e("./typeGuards")),r(e("./lens"))},{"./Dictionary":49,"./Promise":50,"./expression":51,"./function":52,"./lens":54,"./list":55,"./object":56,"./selector":57,"./string":58,"./tree":59,"./typeGuards":60,"./url":61,"./uuid":62}],54:[function(e,t,n){"use strict";function r(e){return{get:function(t){return t[e]},set:function(t,n){return t[e]===n?t:h({},t,(r={},r[e]=n,r));var r}}}function o(e){return{get:function(t){return t[e]},set:function(t,n){return t[e]===n?t:t.slice(0,e).concat([n],t.slice(e+1))}}}function i(e,t){return{get:function(n){return t.get(e.get(n))},set:function(n,r){return e.set(n,t.set(e.get(n),r))}}}function s(){return{get:function(e){return v.stableStringify(e)},set:function(e,t){return JSON.parse(t)}}}function u(){return{get:function(e){return JSON.parse(e)},set:function(e,t){return v.stableStringify(t)}}}function a(){return{get:function(e){return e},set:function(e,t){return t}}}function c(e,t){return{get:function(n){return e(n)?t:n},set:function(e,t){return t}}}function l(e,t){return e.get(t)}function f(e,t,n){return e.set(n,t)}function p(e,t,n){return f(e,t(l(e,n)),n)}function d(e){return void 0!==e?g().chain(e):g()}var h=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0});var v=e("@yieldify/gendry-hash-util"),y=e("./typeGuards");n.property=r,n.listElement=o,n.composeLens=i,n.stringify=s,n.parse=u,n.identityLens=a,n.defaultIf=c,n.defaultIfNull=function(e){return c(y.isNull,e)},n.defaultIfUndefined=function(e){return c(y.isUndefined,e)},n.defaultIfMissing=function(e){return c(y.isMissing,e)},n.get=l,n._get=function(e){return function(t){return l(e,t)}},n.set=f,n._set=function(e,t){return function(n){return f(e,t,n)}},n.modify=p,n._modify=function(e,t){return function(n){return p(e,t,n)}};var g=function(){return b(a())},b=function(e){return{chain:function(t){return b(i(e,t))},done:function(){return e}}};n.lens=d},{"./typeGuards":60,"@yieldify/gendry-hash-util":64}],55:[function(e,t,n){"use strict";function r(e){for(var t=[],n=0,r=e;n<r.length;n++)for(var o=r[n],i=0,s=o;i<s.length;i++){var u=s[i];t.push(u)}return t}function o(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t=i instanceof Array?t.concat(o(i)):t.concat([i])}return t}function i(e){return g(e,W.notMissing)}function s(e,t){return e.map(t)}function u(e){return function(t){return t.map(e)}}function a(e,t){var n=e.indexOf(t);return n===-1?e:(e=e.slice(),e.splice(n,1),e)}function c(e){return function(t){return a(t,e)}}function l(e,t){return p(e,[t])}function f(e){return d([e])}function p(e,t){return e.concat(t)}function d(e){return function(t){return t.concat(e)}}function h(e,t){for(var n=0,r=e.length;n<r&&t(e[n]);)n++;return n}function v(e,t){return e.slice(h(e,t),e.length)}function y(e,t){return e.slice(0,h(e,t))}function g(e,t){return e.filter(t)}function b(e){return function(t){return t.filter(e)}}function m(e,t){if(0!==e.length){var n=v(e,function(e){return!t(e)});return E(n)}}function _(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function E(e){return e[0]}function w(e){return e.slice(1)}function O(e){return e.length>0?e[e.length-1]:void 0}function M(e){return e.slice(0,e.length-1)}function S(e){return i(e)[0]}function P(e){return 0===e.length}function C(e){return e.slice(0).reverse()}function L(e,t){return e.slice(0,t)}function I(e){return function(t){return L(t,e)}}function x(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}function T(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}function j(e,t){return!T(e,function(e){return!t(e)})}function A(e){for(var t=Math.max.apply(Math,e.map(function(e){return e.length})),n=[],r=0;r<t;r++){for(var o=[],i=0,s=e;i<s.length;i++){var u=s[i];o.push(u[r])}n.push(o)}return n}function k(e,t){return H.dict(e.map(function(e){return{key:t(e),value:e}}))}function R(e,t){return H.dict(e.map(function(e){return{key:t(e),value:[e]}}),function(e,t){return{key:e.key,value:e.value.concat(t.value)}})}function N(e,t){return e.slice(0).sort(t)}function U(e){return function(t,n){var r=e(t),o=e(n);return r<o?-1:r>o?1:0}}function D(e,t){return F.values({lowerBound:e,upperBound:t})}function B(e,t){return void 0===t&&(t=V),G.values(k(e,t))}function V(e){var t=q.stableStringify(e);return void 0===t?"undefined":t}Object.defineProperty(n,"__esModule",{value:!0});var H=e("./Dictionary"),G=e("./object"),q=e("@yieldify/gendry-hash-util"),W=e("./typeGuards");n.flatten=r,n.deepFlatten=o,n.compact=i,n.map=s,n._map=u,n.remove=a,n._remove=c,n.append=l,n._append=f,n.concat=p,n._concat=d,n.dropWhile=v,n.takeWhile=y,n.filter=g,n._filter=b,n.find=m,n.findIndex=_,n.head=E,n.tail=w,n.last=O,n.init=M,n.first=S,n.isEmpty=P,n.reverse=C,n.take=L,n._take=I,n.repeat=x,n.some=T,n.every=j,n.zip=A,n.indexBy=k,n._indexBy=function(e){return function(t){return k(t,e)}},n.groupBy=R,n._groupBy=function(e){return function(t){return R(t,e)}},n.sort=N,n._sort=function(e){return function(t){return N(t,e)}},n._compare=U;var F={values:function(e){for(var t=[],n=e.lowerBound;n<e.upperBound;n++)t.push(n);return t}};n.range=D,n.distinct=B},{"./Dictionary":49,"./object":56,"./typeGuards":60,"@yieldify/gendry-hash-util":64}],56:[function(e,t,n){"use strict";function r(e){return Object.keys(e)}function o(e){return r(e).map(function(t){return e[t]})}function i(e,t){var n={};return r(e).forEach(function(r){n[r]=t(e[r])}),n}function s(e){return null!==e&&"object"==typeof e?e instanceof Array?e.slice():u({},e):e}var u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0}),n.keys=r,n.values=o,n.mapValues=i,n._mapValues=function(e){return function(t){return i(t,e)}},n.shallowClone=s},{}],57:[function(e,t,n){"use strict";function r(e,t){return e}function o(e,t){return e===t}function i(e){return function(t,n){if(t===n)return!0;for(var r=y.keys(t).concat(y.keys(n)),o=0,i=r;o<i.length;o++){var s=i[o];if(!e(t[s],n[s]))return!1}return!0}}function s(e){return function(t,n){if(t===n)return!0;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}}function u(e,t){var n,r,o=function(o){return void 0!==n&&t(o,n)||(r=e(o)),n=o,r};return o}function a(e,t,n,r){var o=0,i=n(function(e){return o++,t(e)},r),s=e(i);return s.resultFunc=t,s.recomputations=function(){return o},s.resetRecomputations=function(){o=0},s}function c(e,t,n,r){return void 0===n&&(n=u),void 0===r&&(r=o),a(function(t){return function(n){return t(e(n))}},t,n,r)}function l(e,t,n,r){return void 0===n&&(n=u),void 0===r&&(r=i(o)),a(function(t){return function(n){var r={};for(var o in e)r[o]=e[o](n);return t(r)}},t,n,r)}function f(e,t,n,r){return void 0===n&&(n=u),void 0===r&&(r=s(o)),a(function(t){return function(n){var r=e.map(function(e){return e(n)});return t(r)}},t,n,r)}function p(e,t){return l({state:function(e){return e},input:e},t,u,function(e,t){return e.input===t.input})}function d(e,t,n,r){void 0===n&&(n=u),void 0===r&&(r=o);var i={};return p(e,function(o){var s=o.state,u=o.input,a={},l=y.keys(i),f=function(o){void 0===i[o]&&(i[o]=c(function(t){return e(t)[o]},t,n,r)),a[o]=i[o](s)};for(var p in u)f(p);for(var d=0,h=l;d<h.length;d++){var p=h[d];void 0===u[p]&&delete i[p]}return a})}function h(e,t){return l({index:e,map:t},function(e){for(var t=e.index,n=e.map,r=[],o=0,i=t;o<i.length;o++){var s=i[o];r.push(n[s])}return r})}function v(e,t){return l({key:e,obj:t},function(e){var t=e.key,n=e.obj;return n[t]})}Object.defineProperty(n,"__esModule",{value:!0});var y=e("./object");n.noopMemoise=r,n.strictEqualityCheck=o,n.objectEqualityCheck=i,n.listEqualityCheck=s,n.defaultMemoise=u,n.memoisedSelector=a,n.selector=c,n.mapSelector=l,n.listSelector=f,n.mapSelectorValues=d,n.materialise=h,n.pluck=v},{"./object":56}],58:[function(e,t,n){"use strict";function r(e,t){return 0===t.indexOf(e)}function o(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}Object.defineProperty(n,"__esModule",{value:!0}),n.startsWith=r,n._startWith=function(e){return function(t){return r(e,t)}},n.endsWith=o,n._endsWith=function(e){return function(t){return o(e,t)}}},{}],59:[function(e,t,n){"use strict";function r(e,t,n){var o=t.leftToRight,i=t.into,s=t.outOf;e=i(e);var u=n(e);o||u.reverse();for(var a=0;a<u.length;a++){var c=u[a].get(e),l=r(c,t,n);l!==c&&(e=u[a].set(e,l))}return s(e)}var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(n,"__esModule",{value:!0}),n.traverseTree=function(e){return function(t,n){var i={leftToRight:!0,into:function(e){return e},outOf:function(e){return e}};return r(t,o({},i,n),e)}}},{}],60:[function(e,t,n){"use strict";function r(e){return null===e}function o(e){return void 0===e}function i(e){return null===e||void 0===e}function s(e){return null!==e}function u(e){return void 0!==e}function a(e){return null!==e&&void 0!==e}function c(e){return"string"==typeof e}function l(e){return"number"==typeof e}function f(e){throw new Error("Unexpected value: "+e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isNull=r,n.isUndefined=o,n.isMissing=i,n.notNull=s,n.notUndefined=u,n.notMissing=a,n.isString=c,n.isNumber=l,n.assertNever=f},{}],61:[function(e,t,n){"use strict";function r(e){var t=y.exec(e);if(null===t)throw new Error("Invalid URL");var n=(t[0],t[1],t[2]),r=t[3],i=t[4],s=(t[5],t[6]),u=t[7],a=t[8],c=t[9],l=t[10];if([n,s,a].forEach(function(e){if("string"!=typeof e)throw new Error("Invalid URL")}),"http:"!==n.toLowerCase()&&"https:"!==n.toLowerCase())throw new Error("Only http and https urls supported");return{protocol:n.slice(0,-1),username:r,password:i,hostname:s,port:u,path:a,query:o(c),fragment:o(l)}}function o(e){if(void 0!==e)return e.substring(1)}function i(e){return f(e)+v(e)+a(e)+p(e)+d(e)+h(e)}function s(e){return""===e?[]:e.split("&").map(function(e){var t=e.split("="),n=decodeURIComponent(t[0]),r=1===t.length?null:decodeURIComponent(t.slice(1).join("="));return{key:n,value:r}})}function u(e){return e.map(function(e){var t=e.key,n=e.value;return null===n?encodeURIComponent(t):encodeURIComponent(t)+"="+encodeURIComponent(n)}).join("&")}function a(e){return void 0!==e.port?e.hostname+":"+e.port:e.hostname}function c(e){return f(e)+a(e)}function l(e){return void 0===e.query?[]:s(e.query)}function f(e){if("http"!==e.protocol&&"https"!==e.protocol)throw new Error("Only http and https protocols are supported");return e.protocol+"://"}function p(e){return e.path}function d(e){return void 0===e.query?"":"?"+e.query}function h(e){return void 0!==e.fragment?"#"+e.fragment:""}function v(e){return void 0!==e.username?(void 0!==e.password?e.username+":"+e.password:e.username)+"@":""}Object.defineProperty(n,"__esModule",{value:!0});var y=/^(?:(?:(([^:\/#\?]+:)?(?:(?:\/\/)(?:(?:(?:([^:@\/#\?]+)(?:\:([^:@\/#\?]*))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]*)?)(#.*)?/;n.parseUrl=r,n.stringifyUrl=i,n.parseQueryParameters=s,n.stringifyQueryParameters=u,n.getHost=a,n.getOrigin=c,n.getQueryParameters=l},{}],62:[function(e,t,n){"use strict";function r(e){return e&c|l}function o(){return i.replace(s,function(e){var t=Math.random()*a|0,n=e===u?r(t):t;return n.toString(a)})}Object.defineProperty(n,"__esModule",{value:!0});var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",s=/[xy]/g,u="y",a=16,c=3,l=8;n.generateUUID=o},{}],63:[function(e,t,n){"use strict";function r(e){var t=i.stableStringify(e);if(t)return o.murmur32(t,s)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./murmurHash"),i=e("./stableStringify"),s=5297;n.deepHash=r},{"./murmurHash":65,"./stableStringify":66}],64:[function(e,t,n){"use strict";function r(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),r(e("./deepHash")),r(e("./murmurHash")),r(e("./stableStringify"))},{"./deepHash":63,"./murmurHash":65,"./stableStringify":66}],65:[function(e,t,n){"use strict";function r(e,t){if("undefined"==typeof e)throw new Error("key must be a valid string");if(t<1)throw new Error("seed must be a positive integer");if(e.split("").some(function(e){return e.charCodeAt(0)>127}))throw new Error("key must be an ascii string");for(var n,r,o=3&e.length,i=e.length-o,s=t,u=3432918353,a=461845907,c=0;c<i;)n=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,n=(65535&n)*u+(((n>>>16)*u&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(65535&n)*a+(((n>>>16)*a&65535)<<16)&4294967295,s^=n,s=s<<13|s>>>19,r=5*(65535&s)+((5*(s>>>16)&65535)<<16)&4294967295,s=(65535&r)+27492+(((r>>>16)+58964&65535)<<16);switch(n=0,o){case 3:n^=(255&e.charCodeAt(c+2))<<16;case 2:n^=(255&e.charCodeAt(c+1))<<8;case 1:n^=255&e.charCodeAt(c),n=(65535&n)*u+(((n>>>16)*u&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(65535&n)*a+(((n>>>16)*a&65535)<<16)&4294967295,s^=n}return s^=e.length,s^=s>>>16,s=2246822507*(65535&s)+((2246822507*(s>>>16)&65535)<<16)&4294967295,s^=s>>>13,s=3266489909*(65535&s)+((3266489909*(s>>>16)&65535)<<16)&4294967295,s^=s>>>16,s>>>0}Object.defineProperty(n,"__esModule",{value:!0}),n.MURMUR_32_MAX_VALUE=4294967295,n.murmur32=r},{}],66:[function(e,t,n){"use strict";function r(e,t){if(void 0===t&&(t=[]),e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),"undefined"!=typeof e){if(null===e)return"null";if("object"!=typeof e)return JSON.stringify(e);if(t.indexOf(e)!==-1)throw new TypeError("Converting circular structure to JSON");try{if(t.push(e),o(e)){var n=e.map(function(e){var n=r(e,t)||"null";return n});return"["+n.join(",")+"]"}for(var i=Object.keys(e).sort(),s=[],u=0;u<i.length;u++){var a=i[u],c=r(e[a],t);c&&s.push(JSON.stringify(a)+":"+c)}return"{"+s.join(",")+"}"}finally{t.pop()}}}function o(e){return Array.isArray(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.stableStringify=r},{}],67:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{dup:49}],68:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{"./function":70,dup:50}],69:[function(e,t,n){"use strict";function r(e){return function(t){if(b.isMissing(t))return null;var n=e(t);return b.isMissing(n)?null:n}}function o(e){return function(t){for(var n in t)if(b.isMissing(t[n]))return null;var r=e(t);return b.isMissing(r)?null:r}}function i(e,t,n){var r=m.mapValues(e,t);return g.mapSelector(r,o(n))}function s(e,t,n){var o=e.map(t);return g.selector(u(o),r(n))}function u(e){if(0===e.length)return function(){return[]};var t=e[0],n=u(e.slice(1));return g.mapSelector({head:t,tail:n},o(function(e){var t=e.head,n=e.tail;return[t].concat(n)}))}function a(e){return g.selector(e,r(function(e){var t=Math.max(e,0),n=function(e){return Math.floor(e)===e},r=n(t)?t.toFixed(0):t.toFixed(2);return r}))}function c(e){switch(e.dataType){case"string":return f(e);case"number":return p(e);case"boolean":return d(e);default:throw new Error("Unknown expression data type")}}function l(e){switch(e.dataType){case"string":return f(e);case"number":return a(p(e));default:throw new Error("Unknown expression data type")}}function f(e){switch(e.type){case"variable":return M(e.name);case"string-literal":return function(t){return e.value};case"concat":return s(e.value,l,function(e){return e.join("")});case"if":return h(d(e.condition),f(e.then),f(e["else"]));default:throw new Error("Unknown string expression type")}}function p(e){switch(e.type){case"variable":return S(e.name);case"numeric-literal":return function(t){return e.value};case"arithmetic":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t-n});case"if":return h(d(e.condition),p(e.then),p(e["else"]));case"add":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t+n});case"subtract":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t-n});case"multiply":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return t*n});case"divide":return i({lhs:e.lhs,rhs:e.rhs},p,function(e){var t=e.lhs,n=e.rhs;return 0===n?null:t/n});case"max":return s(e.values,p,function(e){return 0===e.length?null:Math.max.apply(Math,e)});case"min":return s(e.values,p,function(e){return 0===e.length?null:Math.min.apply(Math,e)});default:throw new Error("Unknown numeric expression type")}}function d(e){switch(e.type){case"variable":return P(e.name);case"equals":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t===n});case"not":return i({val:e.value},d,function(e){var t=e.val;return!t});case"not-equals":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t!==n});case"greater-than":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t>n});case"less-than":return i({lhs:e.lhs,rhs:e.rhs},c,function(e){var t=e.lhs,n=e.rhs;return t<n});case"contains":return i({str:e.string,query:e.query},f,function(e){var t=e.str,n=e.query;return _.stringContains(n,t)});case"starts-with":return i({str:e.string,query:e.query},f,function(e){var t=e.str,n=e.query;return _.startsWith(n,t)});default:throw new Error("Unknown boolean expression type")}}function h(e,t,n){return g.mapSelector({condition:e,thenVal:t,elseVal:n},function(e){var t=e.condition,n=e.thenVal,r=e.elseVal;return b.isMissing(t)?null:t?b.isMissing(n)?null:n:b.isMissing(r)?null:r})}function v(e,t){var n=t.get(e);return n.map(function(e,n){return E.composeLens(t,E.listElement(n))})}function y(e){switch(e.type){case"arithmetic":return[E.property("lhs"),E.property("rhs")];case"add":return[E.property("lhs"),E.property("rhs")];case"subtract":return[E.property("lhs"),E.property("rhs")];case"multiply":return[E.property("lhs"),E.property("rhs")];case"divide":return[E.property("lhs"),E.property("rhs")];case"concat":return v(e,E.property("value"));case"if":return[E.property("condition"),E.property("then"),E.property("else")];case"contains":case"starts-with":return[E.property("query"),E.property("string")];case"equals":case"not-equals":return[E.property("lhs"),E.property("rhs")];case"greater-than":case"less-than":return[E.property("lhs"),E.property("rhs")];case"not":return[E.property("value")];case"min":case"max":return v(e,E.property("values"));case"numeric-literal":case"string-literal":case"variable":return[];default:throw new Error("Traversal not implemented for "+e.type+" expressions")}}Object.defineProperty(n,"__esModule",{value:!0});var g=e("./selector"),b=e("./typeGuards"),m=e("./object"),_=e("./string"),E=e("./lens"),w=e("./tree"),O=function(e){return function(t){return t[e]}},M=function(e){return g.selector(O(e),r(function(t){if("String"===t.dataType)return t.value;throw new Error("Expected Variable "+e+" to be a String")}))},S=function(e){return g.selector(O(e),r(function(t){if("Float"===t.dataType||"Integer"===t.dataType)return t.value;throw new Error("Expected Variable "+e+" to be a Float or Integer")}))},P=function(e){return g.selector(O(e),r(function(t){if("Boolean"===t.dataType)return t.value;throw new Error("Expected Variable "+e+" to be a Boolean")}))};n.buildExpression=c,n.stringLikeExpression=l,n.stringExpression=f,n.numericExpression=p,n.booleanExpression=d,n.subExpressions=y,n.traverseExpression=w.traverseTree(y)},{"./lens":72,"./object":74,"./selector":75,"./string":76,"./tree":77,"./typeGuards":78}],70:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],71:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{"./Dictionary":67,"./Promise":68,"./expression":69,"./function":70,"./lens":72,"./list":73,"./object":74,"./selector":75,"./string":76,"./tree":77,"./typeGuards":78,"./url":79,"./uuid":80,dup:53}],72:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{"./typeGuards":78,"@yieldify/gendry-hash-util":82,dup:54}],73:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{"./Dictionary":67,"./object":74,"./typeGuards":78,"@yieldify/gendry-hash-util":82,dup:55}],74:[function(e,t,n){arguments[4][56][0].apply(n,arguments)},{dup:56}],75:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{"./object":74,dup:57}],76:[function(e,t,n){"use strict";function r(e,t){return 0===t.indexOf(e)}function o(e,t){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length}function i(e,t){return t.indexOf(e)!==-1}Object.defineProperty(n,"__esModule",{value:!0}),n.startsWith=r,n._startWith=function(e){return function(t){return r(e,t)}},n.endsWith=o,n._endsWith=function(e){return function(t){return o(e,t)}},n.stringContains=i,n._stringContains=function(e){return function(t){return i(e,t)}}},{}],77:[function(e,t,n){arguments[4][59][0].apply(n,arguments)},{dup:59}],78:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60}],79:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{dup:61}],80:[function(e,t,n){arguments[4][62][0].apply(n,arguments)},{dup:62}],81:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{"./murmurHash":83,"./stableStringify":84,dup:63}],82:[function(e,t,n){arguments[4][64][0].apply(n,arguments)},{"./deepHash":81,"./murmurHash":83,"./stableStringify":84,dup:64}],83:[function(e,t,n){arguments[4][65][0].apply(n,arguments)},{dup:65}],84:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{dup:66}]},{},[3]);}()},{"../lib/Promise":2}],2:[function(e,t,n){/*
 * The MIT License (MIT) applies to:
 *   promise-polyfill, Copyright (c) 2014 Taylor Hakes, Forbes Lindesay
 * -----------------------------------------------------------------------
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
;var r=function f(){function noop(){}function bind(e,t){return function(){e.apply(t,arguments)}}function Promise(e){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void Promise._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?resolve:reject)(t.promise,e._value);var r;try{r=n(e._value)}catch(o){return void reject(t.promise,o)}resolve(t.promise,r)}))}function resolve(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof Promise)return e._state=3,e._value=t,void finale(e);if("function"==typeof n)return void doResolve(bind(n,t),e)}e._state=1,e._value=t,finale(e)}catch(r){reject(e,r)}}function reject(e,t){e._state=2,e._value=t,finale(e)}function finale(e){for(var t=0,n=e._deferreds.length;t<n;t++)handle(e,e._deferreds[t]);e._deferreds=null}function Handler(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function doResolve(e,t){var n=!1;try{e(function(e){n||(n=!0,resolve(t,e))},function(e){n||(n=!0,reject(t,e))})}catch(r){if(n)return;n=!0,reject(t,r)}}var e=setTimeout;return Promise.prototype["catch"]=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){var n=new this.constructor(noop);return handle(this,new Handler(e,t,n)),n},Promise.prototype["finally"]=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},Promise.all=function(e){return new Promise(function(t,n){function res(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var u=i.then;if("function"==typeof u)return void u.call(i,function(t){res(e,t)},n)}r[e]=i,0===--o&&t(r)}catch(f){n(f)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var o=r.length,i=0;i<r.length;i++)res(i,r[i])})},Promise.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Promise?e:new Promise(function(t){t(e)})},Promise.reject=function(e){return new Promise(function(t,n){n(e)})},Promise.race=function(e){return new Promise(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},Promise._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(t){e(t,0)},Promise}();
window/* ---------------------End of MIT licensed code------------------------ */
,t.exports=r},{}]},{},[1]);